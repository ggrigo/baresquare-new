---
/**
 * BlogCard Component
 * Card for blog posts with image zoom on hover
 *
 * Uses SmartLink for "Coming Soon" handling at build time.
 *
 * Verified from Webflow:
 * - Image scale on hover: 1.05
 * - Transition: 0.5s ease
 */

import SmartLink from '../global/SmartLink.astro';
import DotTitle from './DotTitle.astro';
import ArrowLink from './ArrowLink.astro';

interface Props {
  /**
   * Post title
   */
  title: string;

  /**
   * Post excerpt
   */
  excerpt?: string;

  /**
   * Category label
   */
  category?: string;

  /**
   * Category color
   */
  categoryColor?: 'white' | 'purple' | 'orange' | 'green' | 'gold';

  /**
   * Featured image URL
   */
  image?: string;

  /**
   * Image alt text
   */
  imageAlt?: string;

  /**
   * Post URL
   */
  href: string;

  /**
   * Publication date
   */
  date?: string;

  /**
   * Additional CSS class
   */
  class?: string;
}

const {
  title,
  excerpt,
  category,
  categoryColor = 'purple',
  image = '/images/placeholder.jpg',
  imageAlt = '',
  href,
  date,
  class: className
} = Astro.props;
---

<article class:list={['blog-card', className]}>
  <SmartLink href={href} class="blog-card-link">
    <div class="blog-card-image">
      <img src={image} alt={imageAlt} loading="lazy" decoding="async" />
    </div>
    <div class="blog-card-content">
      {category && <DotTitle label={category} color={categoryColor} />}
      <h3 class="blog-card-title">{title}</h3>
      {excerpt && <p class="blog-card-excerpt">{excerpt}</p>}
      <div class="blog-card-footer">
        {date && <time class="blog-card-date">{date}</time>}
        <ArrowLink text="Read more" href={href} />
      </div>
    </div>
  </SmartLink>
</article>

<style>
  .blog-card {
    background-color: var(--bg-dark);
    border-radius: var(--radius-md);
    overflow: hidden;
    transition: background-color 0.2s ease;
  }

  .blog-card:hover {
    background-color: var(--bg-card);
  }

  .blog-card-link {
    display: block;
    text-decoration: none;
    color: inherit;
  }

  .blog-card-image {
    aspect-ratio: 16/9;
    overflow: hidden;
  }

  .blog-card-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s ease;
  }

  .blog-card:hover .blog-card-image img {
    transform: scale(1.05);
  }

  .blog-card-content {
    padding: var(--space-md);
  }

  .blog-card-title {
    font-size: var(--text-h5);
    margin: var(--space-sm) 0;
    line-height: 1.3;
  }

  .blog-card-excerpt {
    font-size: var(--text-small);
    color: var(--text-muted);
    margin-bottom: var(--space-md);
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .blog-card-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .blog-card-date {
    font-size: var(--text-small);
    color: var(--text-subtle);
  }
</style>

---
/**
 * TwoColumnGrid Section Component
 * Two-column layout with text and image
 */

import Container from '../base/Container.astro';
import DotTitle from '../ui/DotTitle.astro';
import ArrowLink from '../ui/ArrowLink.astro';
import NoiseOverlay from '../base/NoiseOverlay.astro';

interface Props {
  /**
   * Section badge
   */
  badge?: string;

  /**
   * Section headline
   */
  headline?: string;

  /**
   * Description text
   */
  description?: string;

  /**
   * Faded/muted continuation text
   */
  fadedText?: string;

  /**
   * Image URL
   */
  image?: string;

  /**
   * Image alt text
   */
  imageAlt?: string;

  /**
   * Link text
   */
  linkText?: string;

  /**
   * Link URL
   */
  linkHref?: string;

  /**
   * Reverse layout (image on left)
   * @default false
   */
  reversed?: boolean;

  /**
   * Badge color
   */
  badgeColor?: 'white' | 'purple' | 'orange' | 'green' | 'gold';
}

const {
  badge,
  headline,
  description,
  fadedText,
  image,
  imageAlt = '',
  linkText,
  linkHref = '#',
  reversed = false,
  badgeColor = 'gold'
} = Astro.props;
---

<section class:list={['two-column-section', reversed && 'two-column-section--reversed']}>
  <Container>
    <div class="two-column-grid">
      <div class="two-column-content">
        {badge && <DotTitle label={badge} color={badgeColor} />}
        {headline && <h2 class="two-column-headline">{headline}</h2>}
        {description && (
          <p class="two-column-description">
            {description}
            {fadedText && <span class="text-faded"> {fadedText}</span>}
          </p>
        )}
        {linkText && <ArrowLink text={linkText} href={linkHref} />}
      </div>
      <div class="two-column-image">
        {image && <img src={image} alt={imageAlt} loading="lazy" />}
        <NoiseOverlay opacity={0.4} />
      </div>
    </div>
  </Container>
</section>

<style>
  .two-column-section {
    padding: var(--space-xl) 0;
  }

  .two-column-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-xl);
    align-items: center;
  }

  .two-column-section--reversed .two-column-grid {
    direction: rtl;
  }

  .two-column-section--reversed .two-column-grid > * {
    direction: ltr;
  }

  .two-column-content {
    max-width: 500px;
  }

  .two-column-headline {
    font-size: var(--text-h2);
    margin: var(--space-sm) 0 var(--space-md);
    line-height: var(--line-height-heading);
  }

  .two-column-description {
    margin-bottom: var(--space-md);
    line-height: 1.6;
  }

  .two-column-image {
    position: relative;
    border-radius: var(--radius-md);
    overflow: hidden;
  }

  .two-column-image img {
    width: 100%;
    height: auto;
    display: block;
  }

  @media (max-width: 991px) {
    .two-column-section {
      padding: var(--space-lg) 0;
    }

    .two-column-grid {
      grid-template-columns: 1fr;
      gap: var(--space-lg);
    }

    .two-column-section--reversed .two-column-grid {
      direction: ltr;
    }

    .two-column-content {
      max-width: none;
    }

    /* Text first on mobile for narrative flow */
  }

  @media (max-width: 767px) {
    .two-column-headline {
      font-size: var(--text-h3);
    }

    .two-column-description {
      font-size: var(--text-body);
    }
  }

  @media (max-width: 479px) {
    .two-column-section {
      padding: var(--space-md) 0;
    }

    .two-column-headline {
      font-size: var(--text-h4);
      margin: var(--space-xs) 0 var(--space-sm);
    }
  }
</style>

---
/**
 * Baresquare Homepage
 *
 * This page uses config-driven section visibility.
 * All content is imported from src/content/home/.
 * Section visibility is controlled by src/config/site.config.ts.
 *
 * IMPORTANT: Sections are rendered at BUILD TIME.
 * Disabled sections produce NO HTML output (not hidden, excluded entirely).
 */

// Layout and Navigation
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/layout/Navbar.astro';
import Footer from '../components/layout/Footer.astro';
import ComingSoonModal from '../components/global/ComingSoonModal.astro';

// Section Components
import Hero from '../components/sections/Hero.astro';
import FeatureSlider from '../components/sections/FeatureSlider.astro';
import TwoColumnGrid from '../components/sections/TwoColumnGrid.astro';
import Stats from '../components/sections/Stats.astro';
import Services from '../components/sections/Services.astro';
import ProcessSteps from '../components/sections/ProcessSteps.astro';
import CustomerQuote from '../components/sections/CustomerQuote.astro';
import BlogGrid from '../components/sections/BlogGrid.astro';
import CTASection from '../components/sections/CTASection.astro';

// Configuration
import { isSectionEnabled, isElementEnabled } from '../config/site.config';

// Content
import {
  heroContent,
  featureSliderContent,
  aboutContent,
  approachContent,
  statsContent,
  servicesContent,
  processContent,
  testimonialContent,
  blogContent,
  ctaMidContent,
  ctaFinalContent,
} from '../content/home';
---

<Layout
  title="Baresquare - AI-Powered eCommerce Agents"
  description="AI that monitors your campaigns, inventory, pricing, and competitors—then takes action automatically."
>
  <Navbar slot="navbar" />

  {/* Hero Section */}
  {isSectionEnabled('hero') && (
    <Hero
      badge={heroContent.badge}
      headline={heroContent.headline}
      accentWord={heroContent.accentWord}
      backgroundImage={heroContent.backgroundImage}
      videoId={heroContent.videoId}
      videoThumbnailAlt={heroContent.videoThumbnailAlt}
      infoBadge={heroContent.infoBadge}
      infoDescription={heroContent.infoDescription}
    />
  )}

  {/* Feature Slider */}
  {isSectionEnabled('featureSlider') && (
    <FeatureSlider
      badge={featureSliderContent.badge}
      headline={featureSliderContent.headline}
      features={featureSliderContent.features}
    />
  )}

  {/* About Section (TwoColumnGrid) */}
  {isSectionEnabled('about') && (
    <TwoColumnGrid
      badge={aboutContent.badge}
      headline={aboutContent.headline}
      description={aboutContent.description}
      fadedText={aboutContent.fadedText}
      image={aboutContent.image}
      imageAlt={aboutContent.imageAlt}
      linkText={isElementEnabled('about', 'ctaLink') ? aboutContent.linkText : undefined}
      linkHref={aboutContent.linkHref}
      badgeColor={aboutContent.badgeColor}
    />
  )}

  {/* Approach Section (TwoColumnGrid, reversed) */}
  {isSectionEnabled('approach') && (
    <TwoColumnGrid
      badge={approachContent.badge}
      headline={approachContent.headline}
      description={approachContent.description}
      image={approachContent.image}
      imageAlt={approachContent.imageAlt}
      linkText={isElementEnabled('approach', 'ctaLink') ? approachContent.linkText : undefined}
      linkHref={approachContent.linkHref}
      reversed={approachContent.reversed}
      badgeColor={approachContent.badgeColor}
    />
  )}

  {/* Stats Section */}
  {isSectionEnabled('stats') && (
    <Stats
      badge={statsContent.badge}
      headline={statsContent.headline}
      stats={statsContent.stats}
    />
  )}

  {/* Services Section */}
  {isSectionEnabled('services') && (
    <Services
      introHeadline={servicesContent.introHeadline}
      introDescription={servicesContent.introDescription}
      services={servicesContent.services}
    />
  )}

  {/* Process Steps */}
  {isSectionEnabled('process') && (
    <ProcessSteps
      badge={processContent.badge}
      headline={processContent.headline}
      steps={processContent.steps}
      linkText={processContent.linkText}
      linkHref={processContent.linkHref}
    />
  )}

  {/* Customer Quote / Testimonial - DEACTIVATED (merged into CTA section)
  {isSectionEnabled('testimonial') && (
    <CustomerQuote
      quote={testimonialContent.quote}
      author={testimonialContent.author}
      authorTitle={testimonialContent.authorTitle}
      company={testimonialContent.company}
      linkText={testimonialContent.linkText}
      linkHref={testimonialContent.linkHref}
    />
  )}
  */}

  {/* Mid-Page CTA */}
  {isSectionEnabled('ctaMid') && (
    <CTASection
      headline={ctaMidContent.headline}
      accentWord={ctaMidContent.accentWord}
      description={ctaMidContent.description}
      ctaText={ctaMidContent.ctaText}
      ctaHref={ctaMidContent.ctaHref}
      secondaryText={ctaMidContent.secondaryText}
      secondaryHref={ctaMidContent.secondaryHref}
    />
  )}

  {/* Blog Grid */}
  {isSectionEnabled('blog') && (
    <BlogGrid
      badge={blogContent.badge}
      headline={blogContent.headline}
      posts={blogContent.posts}
      showViewAll={blogContent.showViewAll}
      viewAllHref={blogContent.viewAllHref}
    />
  )}

  {/* Final CTA + Quote Glass Panel - colored gradient with glass quote panel */}
  <div class="cta-quote-wrapper">
    {/* Color blobs layer */}
    <div class="cta-footer-blobs" aria-hidden="true">
      <div class="blob blob--green"></div>
      <div class="blob blob--orange"></div>
      <div class="blob blob--gold"></div>
    </div>

    {/* Noise overlay */}
    <div class="cta-footer-noise" aria-hidden="true"></div>

    {/* Dot grid overlay */}
    <div class="cta-footer-grid" aria-hidden="true"></div>

    {/* CTA Content with glass quote panel */}
    {isSectionEnabled('ctaFinal') && (
      <div class="cta-footer-content">
        {/* Glass panel for quote - 95%+ width */}
        <div class="cta-glass-quote">
          <blockquote class="cta-quote">
            "{ctaFinalContent.quote}"
          </blockquote>
          <div class="cta-quote-attribution">
            <span class="quote-author">{ctaFinalContent.quoteAuthor}</span>
            <span class="quote-title">{ctaFinalContent.quoteAuthorTitle}</span>
            <span class="quote-company">{ctaFinalContent.quoteCompany}</span>
          </div>
        </div>

        {/* CTA headline and button */}
        <div class="cta-text-wrapper">
          <h2 class="cta-headline">
            {ctaFinalContent.headline} <span class="text-mono">{ctaFinalContent.accentWord}</span>
          </h2>
          <p class="cta-description">{ctaFinalContent.description}</p>
          <div class="cta-actions">
            <a href={ctaFinalContent.ctaHref} class="cta-button">{ctaFinalContent.ctaText}</a>
          </div>
        </div>
      </div>
    )}

    {/* Glass Quote Panel - DEACTIVATED
    <div class="quote-glass-panel">
      <div class="quote-glass-inner">
        <blockquote class="quote-text">
          "{ctaFinalContent.quote}"
        </blockquote>
        <div class="quote-attribution">
          <span class="quote-author">{ctaFinalContent.quoteAuthor}</span>
          <span class="quote-title">{ctaFinalContent.quoteAuthorTitle}</span>
          <span class="quote-company">{ctaFinalContent.quoteCompany}</span>
        </div>
      </div>
    </div>
    */}
  </div>

  {/* Regular dark footer */}
  <Footer slot="footer" />

  {/* Global Coming Soon Modal */}
  <ComingSoonModal />
</Layout>

<style>
  /* CTA + Quote Wrapper - colored gradient with glass quote panel at bottom */
  .cta-quote-wrapper {
    position: relative;
    background-color: var(--bg-accent);
    margin: 0 2px;
    border-radius: var(--radius-md);
    overflow: hidden;
  }

  /* Color blobs */
  .cta-footer-blobs {
    position: absolute;
    inset: 0;
    z-index: 0;
    overflow: hidden;
    pointer-events: none;
  }

  .blob {
    position: absolute;
    border-radius: 50%;
    filter: blur(120px);
  }

  .blob--green {
    width: 600px;
    height: 500px;
    background: var(--accent-green);
    top: -100px;
    left: -200px;
    opacity: 0.9;
    animation: blob-drift-1 30s cubic-bezier(0.45, 0, 0.55, 1) infinite alternate;
  }

  .blob--orange {
    width: 550px;
    height: 450px;
    background: var(--accent-orange);
    bottom: -150px;
    right: -100px;
    opacity: 0.9;
    animation: blob-drift-2 25s cubic-bezier(0.45, 0, 0.55, 1) infinite alternate;
  }

  .blob--gold {
    width: 500px;
    height: 400px;
    background: var(--accent-gold);
    top: -150px;
    right: 200px;
    opacity: 0.85;
    animation: blob-drift-3 35s cubic-bezier(0.45, 0, 0.55, 1) infinite alternate;
  }

  @keyframes blob-drift-1 {
    0% { transform: translate(0, 0) scale(1); }
    50% { transform: translate(40px, 30px) scale(1.05); }
    100% { transform: translate(-20px, 50px) scale(0.95); }
  }

  @keyframes blob-drift-2 {
    0% { transform: translate(0, 0) scale(1); }
    50% { transform: translate(-50px, -40px) scale(0.95); }
    100% { transform: translate(30px, -20px) scale(1.05); }
  }

  @keyframes blob-drift-3 {
    0% { transform: translate(0, 0) scale(1); }
    50% { transform: translate(-40px, 50px) scale(1.06); }
    100% { transform: translate(60px, -30px) scale(0.94); }
  }

  /* Noise overlay */
  .cta-footer-noise {
    position: absolute;
    inset: 0;
    z-index: 1;
    background-image: url('/textures/noise-pattern.png');
    background-repeat: repeat;
    background-size: 300px 300px;
    opacity: 0.7;
    pointer-events: none;
  }

  /* Dot grid overlay */
  .cta-footer-grid {
    position: absolute;
    inset: 0;
    z-index: 2;
    background-image: url('/textures/dot-grid.png');
    background-repeat: repeat;
    background-size: 48px 48px;
    mix-blend-mode: overlay;
    pointer-events: none;
  }

  /* CTA Content */
  .cta-footer-content {
    position: relative;
    z-index: 3;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-lg);
    padding: 43px var(--gutter); /* 5px less top */
  }

  /* Glass panel for quote */
  .cta-glass-quote {
    width: calc(100% - 10px); /* 5px left + 5px right */
    max-width: 1400px;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border-radius: var(--radius-md);
    padding: 48px;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .cta-text-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 24px;
    text-align: center;
    max-width: 800px;
    padding: var(--space-md) 0;
  }

  .cta-headline {
    font-size: var(--text-display);
    line-height: 1.1;
    margin: 0;
    color: var(--text-primary);
  }

  .cta-description {
    font-size: var(--text-h4);
    line-height: 1.25;
    color: var(--text-primary);
    margin: 0;
    max-width: 600px;
  }

  /* Integrated quote in CTA */
  .cta-quote {
    font-family: var(--font-primary);
    font-size: var(--text-h4);
    font-style: italic;
    font-weight: 400;
    line-height: 1.4;
    color: var(--text-primary);
    margin: 0 0 16px 0;
    max-width: 620px; /* Narrower to force 4 lines */
    text-align: center;
  }

  .cta-quote-attribution {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    font-size: var(--text-small);
    color: var(--text-muted);
  }

  .cta-quote-attribution .quote-author {
    font-weight: 600;
    color: var(--text-primary);
  }

  .cta-quote-attribution .quote-title::before,
  .cta-quote-attribution .quote-company::before {
    content: '·';
    margin-right: 8px;
  }

  .cta-actions {
    display: flex;
    align-items: center;
    gap: 24px;
    margin-top: 24px;
  }

  .cta-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    height: 48px;
    padding: 0 54px;
    font-family: var(--font-primary);
    font-size: var(--text-small);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.02em;
    color: var(--text-primary);
    background-color: rgba(0, 0, 0, 0.25);
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
    border: none;
    border-radius: 2000px;
    cursor: pointer;
    text-decoration: none;
    white-space: nowrap;
    transition: background-color 0.2s ease;
  }

  .cta-button:hover {
    background-color: rgba(0, 0, 0, 0.4);
  }

  /* Glass Quote Panel */
  .quote-glass-panel {
    position: relative;
    z-index: 3;
    padding: 0 var(--gutter) var(--space-lg);
  }

  .quote-glass-inner {
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
    border-radius: var(--radius-md);
    padding: 48px;
    max-width: 1200px;
    margin: 0 auto;
  }

  .quote-text {
    font-size: var(--text-h4);
    font-family: var(--font-mono);
    font-style: italic;
    line-height: 1.4;
    color: var(--text-primary);
    margin: 0 0 var(--space-md) 0;
  }

  .quote-attribution {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: var(--text-small);
    color: var(--text-muted);
  }

  .quote-author {
    font-weight: 600;
    color: var(--text-primary);
  }

  .quote-title::before,
  .quote-company::before {
    content: '·';
    margin-right: 8px;
  }

  /* Responsive */
  @media (max-width: 991px) {
    .cta-quote-wrapper {
      margin: 0 1px;
    }

    .cta-footer-content {
      min-height: 280px;
    }

    .cta-headline {
      font-size: var(--text-h1);
    }

    .cta-description {
      font-size: var(--text-h5);
    }

    .blob--green {
      width: 450px;
      height: 380px;
    }

    .blob--orange {
      width: 400px;
      height: 350px;
    }

    .blob--gold {
      width: 380px;
      height: 320px;
    }

    .quote-glass-inner {
      padding: 36px;
    }

    .quote-text {
      font-size: var(--text-h5);
    }
  }

  @media (max-width: 767px) {
    .cta-footer-content {
      min-height: 300px;
      padding: var(--space-lg) var(--gutter);
    }

    .cta-headline {
      font-size: var(--text-h2);
    }

    .cta-description {
      font-size: var(--text-body);
    }

    .quote-glass-inner {
      padding: 24px;
    }

    .quote-attribution {
      flex-wrap: wrap;
    }
  }

  @media (max-width: 479px) {
    .cta-footer-content {
      min-height: 260px;
    }

    .cta-headline {
      font-size: var(--text-h3);
    }

    .cta-button {
      padding: 0 36px;
    }

    .blob--green,
    .blob--orange,
    .blob--gold {
      display: none;
    }

    .quote-glass-inner {
      padding: 18px;
    }

    .quote-text {
      font-size: var(--text-body);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .blob {
      animation: none;
    }
  }
</style>
